(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(24),c=a(6),s=(a(33),a(34),a(3)),r=a(5),l=a(0),i=a.n(l),o=a(8),j=a(9),d=a.n(j);function b(e,t){var a=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(r.a)(e,2),n=t[0],c=t[1];null===c?a.delete(n):Array.isArray(c)?(a.delete(n),c.forEach((function(e){a.append(n,e)}))):a.set(n,c)})),a.toString()}var h=function(e){return e.Empty="",e.Male="m",e.Female="f",e}({}),u=a(1),p=["16","17","18","19","20"],m=function(){var e=Object(c.d)(),t=Object(r.a)(e,1)[0],a=Object(s.m)(),n=t.getAll("centuries")||[],l=function(e){return e?n.includes(e)?b(t,{centuries:Object(o.a)(n).filter((function(t){return t!==e}))||[]}):b(t,{centuries:[].concat(Object(o.a)(n),[e])}):b(t,{centuries:null})};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"level-left",children:p.map((function(e){return Object(u.jsx)(c.b,{"data-cy":"century",className:d()("button","mr-1",{"is-info":n.includes(e)}),to:{pathname:a.pathname,search:l(e)},children:e},"century-".concat(e))}))}),Object(u.jsx)("div",{className:"level-right ml-4",children:Object(u.jsx)(c.b,{"data-cy":"centuryALL",className:d()("button","is-success",{"is-outlined":n.length>0}),to:{pathname:a.pathname,search:l(null)},children:"All"})})]})},x=i.a.memo((function(e){var t=e.people,a=e.onSetFilteredPeople,n=Object(c.d)(),i=Object(r.a)(n,2),j=i[0],p=i[1],x=j.get("query")||"",O=j.getAll("centuries")||[],f=j.get("sex")||"",N=Object(s.m)();return Object(l.useEffect)((function(){a(Object(o.a)(t).filter((function(e){var t=x.trim().toLocaleLowerCase(),a=e.name,n=e.motherName,c=e.fatherName;return!t||!(null===n||!n.toLocaleLowerCase().includes(t))||!(null===c||!c.toLocaleLowerCase().includes(t))||a.toLocaleLowerCase().includes(t)})).filter((function(e){return!f||e.sex===f})).filter((function(e){if(void 0!==O&&O.length>0){var t=e.born,a=Math.ceil(+t/100);return O.includes(a.toString())}return!0})))}),[j]),Object(u.jsxs)("nav",{className:"panel",children:[Object(u.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(u.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(u.jsx)(c.b,{className:d()({"is-active":f===h.Empty}),to:{pathname:N.pathname,search:b(j,{sex:null})},children:"All"}),Object(u.jsx)(c.b,{className:d()({"is-active":f===h.Male}),to:{pathname:N.pathname,search:b(j,{sex:h.Male})},children:"Male"}),Object(u.jsx)(c.b,{className:d()({"is-active":f===h.Female}),to:{pathname:N.pathname,search:b(j,{sex:h.Female})},children:"Female"})]}),Object(u.jsx)("div",{className:"panel-block",children:Object(u.jsxs)("p",{className:"control has-icons-left",children:[Object(u.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:x,onChange:function(e){var t={query:e.target.value||null};p(b(j,t))}}),Object(u.jsx)("span",{className:"icon is-left",children:Object(u.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(u.jsx)("div",{className:"panel-block",children:Object(u.jsx)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:Object(u.jsx)(m,{})})}),Object(u.jsx)("div",{className:"panel-block",children:Object(u.jsx)(c.b,{className:"button is-link is-outlined is-fullwidth",to:{pathname:N.pathname,search:b(j,{sex:null,centuries:null,query:null})},children:"Reset all filters"})})]})})),O=(a(36),function(){return Object(u.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(u.jsx)("div",{className:"Loader__content"})})}),f=function(e){var t=e.person,a=e.people,n=t.name,l=t.sex,i=t.born,o=t.died,j=t.fatherName,b=t.motherName,p=t.slug,m=Object(s.q)().personLink,x=Object(c.d)(),O=Object(r.a)(x,1)[0],f=function(e){var t=a.find((function(t){return t.name===e}));return t?Object(u.jsx)(c.b,{to:{pathname:"/people/".concat(t.slug),search:O.toString()},className:d()({"has-text-danger":t.sex===h.Female}),children:t.name}):e||"-"};return Object(u.jsxs)("tr",{"data-cy":"person",className:d()({"has-background-warning":p===m}),children:[Object(u.jsx)("td",{children:Object(u.jsx)(c.b,{to:{pathname:"/people/".concat(p),search:O.toString()},className:d()({"has-text-danger":l===h.Female}),children:n})}),Object(u.jsx)("td",{children:l}),Object(u.jsx)("td",{children:i}),Object(u.jsx)("td",{children:o}),Object(u.jsx)("td",{children:f(b)}),Object(u.jsx)("td",{children:f(j)})]})},N=function(e){return e.Name="name",e.Sex="sex",e.Born="born",e.Died="died",e}({}),v=function(e){var t=e.people,a=e.filteredPeople,n=Object(l.useState)(a),i=Object(r.a)(n,2),j=i[0],h=i[1],p=Object(c.d)(),m=Object(r.a)(p,1)[0],x=Object(s.m)(),O=m.get("sort")||"",v=m.get("order")||"",g=function(e){return Object(o.a)(a).sort((function(t,a){if("string"===typeof t[e]){var n=t[e].toString(),c=a[e].toString();return n.localeCompare(c)}return+t[e]-+a[e]}))},w=function(e){return b(m,O!==e?{sort:e,order:null}:v?{sort:null,order:null}:{order:"desc"})};return Object(l.useMemo)((function(){h(function(){var e=a;if(O){switch(O){case N.Name:e=g(N.Name);break;case N.Sex:e=g(N.Sex);break;case N.Born:e=g(N.Born);break;case N.Died:e=g(N.Died);break;default:e=a}return v?e.reverse():e}return e}())}),[m,a]),Object(u.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:Object(u.jsxs)("span",{className:"is-flex is-flex-wrap-no-wrap",children:["Name",Object(u.jsx)(c.b,{to:{pathname:x.pathname,search:w("name")},children:Object(u.jsx)("span",{className:"icon",children:Object(u.jsx)("i",{className:d()("fas",{"fa-sort":O!==N.Name},{"fa-sort-up":O===N.Name&&!v},{"fa-sort-down":O===N.Name&&v})})})})]})}),Object(u.jsx)("th",{children:Object(u.jsxs)("span",{className:"is-flex is-flex-wrap-no-wrap",children:["Sex",Object(u.jsx)(c.b,{to:{pathname:x.pathname,search:w("sex")},children:Object(u.jsx)("span",{className:"icon",children:Object(u.jsx)("i",{className:d()("fas",{"fa-sort":O!==N.Sex},{"fa-sort-up":O===N.Sex&&!v},{"fa-sort-down":O===N.Sex&&v})})})})]})}),Object(u.jsx)("th",{children:Object(u.jsxs)("span",{className:"is-flex is-flex-wrap-no-wrap",children:["Born",Object(u.jsx)(c.b,{to:{pathname:x.pathname,search:w("born")},children:Object(u.jsx)("span",{className:"icon",children:Object(u.jsx)("i",{className:d()("fas",{"fa-sort":O!==N.Born},{"fa-sort-up":O===N.Born&&!v},{"fa-sort-down":O===N.Born&&v})})})})]})}),Object(u.jsx)("th",{children:Object(u.jsxs)("span",{className:"is-flex is-flex-wrap-no-wrap",children:["Died",Object(u.jsx)(c.b,{to:{pathname:x.pathname,search:w("died")},children:Object(u.jsx)("span",{className:"icon",children:Object(u.jsx)("i",{className:d()("fas",{"fa-sort":O!==N.Died},{"fa-sort-up":O===N.Died&&!v},{"fa-sort-down":O===N.Died&&v})})})})]})}),Object(u.jsx)("th",{children:"Mother"}),Object(u.jsx)("th",{children:"Father"})]})}),Object(u.jsx)("tbody",{children:j.map((function(e){return Object(u.jsx)(f,{people:t,person:e},e.slug)}))})]})},g=a(4),w=a(7),y="https://mate-academy.github.io/react_people-table/api/people.json";function S(e){return new Promise((function(t){return setTimeout(t,e)}))}function k(){return(k=Object(w.a)(Object(g.a)().mark((function e(){return Object(g.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S(1e3).then((function(){return fetch(y)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){var e=Object(l.useState)(null),t=Object(r.a)(e,2),a=t[0],n=t[1],c=Object(l.useState)(!1),s=Object(r.a)(c,2),i=s[0],o=s[1],j=Object(l.useState)([]),d=Object(r.a)(j,2),b=d[0],h=d[1];return Object(l.useEffect)((function(){(function(){return k.apply(this,arguments)})().then((function(e){n(e),h(e)})).catch((function(){o(!0)}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"title",children:"People Page"}),Object(u.jsx)("div",{className:"block",children:Object(u.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(u.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:null!==a&&a.length>0&&Object(u.jsx)(x,{people:a,onSetFilteredPeople:h})}),Object(u.jsx)("div",{className:"column",children:Object(u.jsxs)("div",{className:"box table-container",children:[null===a&&!1===i&&Object(u.jsx)(O,{}),null!==a&&b.length>0&&Object(u.jsx)(v,{people:a,filteredPeople:b}),i&&Object(u.jsx)("p",{"data-cy":"peopleLoadingError",children:"Something went wrong"}),null!==a&&a.length<1&&Object(u.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),null!==a&&b.length<1&&Object(u.jsx)("p",{children:"There are no people matching the current search criteria"})]})})]})})]})},F=function(e){var t=e.isActive;return d()("navbar-item",{"has-background-grey-lighter":t})},P=function(){return Object(u.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsxs)("div",{className:"navbar-brand",children:[Object(u.jsx)(c.c,{to:"/",className:F,children:"Home"}),Object(u.jsx)(c.c,{"aria-current":"page",to:"/people",className:F,children:"People"})]})})})},A=(a(37),function(){return Object(u.jsx)("h1",{className:"title",children:"Home Page"})}),B=function(){return Object(u.jsx)("h1",{className:"title",children:"Page not found"})},E=function(){return Object(u.jsxs)("div",{"data-cy":"app",children:[Object(u.jsx)(P,{}),Object(u.jsx)("div",{className:"section",children:Object(u.jsx)("div",{className:"container",children:Object(u.jsx)(s.d,{children:Object(u.jsxs)(s.b,{path:"/",children:[Object(u.jsx)(s.b,{index:!0,element:Object(u.jsx)(A,{})}),Object(u.jsx)(s.b,{path:"/home",element:Object(u.jsx)(s.a,{to:"/",replace:!0})}),Object(u.jsxs)(s.b,{path:"people",children:[Object(u.jsx)(s.b,{index:!0,element:Object(u.jsx)(L,{})}),Object(u.jsx)(s.b,{path:":personLink",element:Object(u.jsx)(L,{})})]}),Object(u.jsx)(s.b,{path:"*",element:Object(u.jsx)(B,{})})]})})})})]})};Object(n.createRoot)(document.getElementById("root")).render(Object(u.jsx)(c.a,{children:Object(u.jsx)(E,{})}))}},[[38,1,2]]]);
//# sourceMappingURL=main.59f76ab5.chunk.js.map